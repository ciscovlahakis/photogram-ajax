<li class="list-group-item">
  <%# Determine the appropriate ID for the form based on context %>
  <% form_id = comment.persisted? ? "#{dom_id(comment.photo)}_#{dom_id(comment)}_form" : "#{dom_id(comment.photo)}_new_comment_form" %>
  
  <%= form_with(model: comment, local: false, id: form_id) do |form| %>
    <% if comment.errors.any? %>
      <div id="error_explanation">
        <ul class="list-unstyled">
          <% comment.errors.each do |error| %>
            <li>
              <div class="alert alert-danger" role="alert">
                <%= error.full_message %>
              </div>
            </li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%= form.hidden_field :photo_id %>

    <div class="mb-3">
      <%= form.label :body, class: "sr-only" %>
      <%= form.text_area :body, class: "form-control" %>
    </div>

    <div class="actions">
      <%= form.submit class: "btn btn-outline-secondary btn-block" %>
    </div>
  <% end %>
</li>
